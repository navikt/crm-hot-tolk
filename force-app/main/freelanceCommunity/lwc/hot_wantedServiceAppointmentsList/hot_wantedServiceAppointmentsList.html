<template>
    <template lwc:if={hasResult}>
        <div class="main-content">
            <c-hot_freelance-common-table
                records={records}
                checkbox="true"
                columns={columns}
                onrowclick={goToRecordDetails}
                icon-by-value={iconByValue}
                checked-rows={checkedServiceAppointments}
                oncheckedrows={handleRowChecked}
            ></c-hot_freelance-common-table>
        </div>
    </template>

    <template lwc:elseif={noServiceAppointmentsResult}>
        <div style="text-align: center">
            <br />
            <p>Det er ingen oppdrag her.</p>
            <br />
        </div>
    </template>
    <div lwc:if={showServiceAppointmentDetailsModal} aria-label="Informasjon om oppdrag">
        <div class="modal-wrapper">
            <section class="modal-backdrop" onclick={closeModal} tabindex="-1"></section>
            <section class="modal-container" tabindex="0" onkeydown={handleKeyDown}>
                <div class="modal-header">
                    <h2>Informasjon om oppdraget:</h2>
                    <button class="close-btn" onclick={closeModal} aria-label="Lukk">
                        <img src={exitCrossIcon} alt="" aria-hidden="true" />
                    </button>
                </div>
                <div if:true={isDetails} class="modal-body">
                    <p>Oppdragsnummer: <span>{serviceAppointment.HOT_ServiceAppointmentNumber__c}</span></p>
                    <p>Tema: <span>{serviceAppointment.HOT_FreelanceSubject__c}</span></p>
                    <p>Tid: <span> {serviceAppointment.weekday} {serviceAppointment.StartAndEndDate}</span></p>
                    <p>Adresse: <span>{serviceAppointment.HOT_AddressFormated__c}</span></p>
                    <p>Tolkemetode: <span>{serviceAppointment.HOT_WorkTypeName__c}</span></p>
                    <p>Oppdragstype: <span>{serviceAppointment.HOT_AssignmentType__c}</span></p>
                    <p>Frigitt av: <span>{serviceAppointment.HOT_ReleasedBy__c}</span></p>
                    <p>Frigitt dato: <span>{serviceAppointment.ReleaseDate}</span></p>
                    <p>Antall påmeldte: <span>{serviceAppointment.HOT_NumberOfInterestedResources__c}</span></p>
                    <p>Eier: <span>{serviceAppointment.HOT_Request__r.OwnerName__c}</span></p>
                    <p>Frist dato: <span>{serviceAppointment.HOT_DeadlineDate__c}</span></p>
                    <br />
                    <div if:true={isSeries}>
                        <c-button
                            button-styling="primary"
                            button-label="Meld interesse til alle oppdrag i serien"
                            aria-label="Meld interesse til alle oppdrag i serien"
                            onbuttonclick={sendInterestSeries}
                            desktop-style="width: 20rem; justify-content: center; margin-bottom: 1rem;"
                            mobile-style="width: 100%; justify-content: center; margin-bottom: 1rem;"
                            title="Meld interesse til alle oppdrag i serien"
                        >
                        </c-button>
                        <c-hot_freelance-common-table
                            records={seriesRecords}
                            columns={inDetailsColumns}
                            onrowclick={goToRecordDetails}
                        ></c-hot_freelance-common-table>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <div if:true={showSendInterestOrDecline} class="meld-interesse-eller-avlsaa--overlay">
        <div class="meld-interesse-eller-avslaa-content">
            <c-button
                button-styling="primary"
                button-label={sendInterestButtonLabel}
                aria-label="Meld interesse"
                onbuttonclick={registerInterestChecked}
                desktop-style=" justify-content: center; margin: 1.5vw; border-radius: 0.25rem;"
                mobile-style="justify-content: center; margin: 1.5vw; border-radius: 0.25rem;"
                title="Merk sjekkboks i listen for å melde interesse"
            >
            </c-button>
        </div>
    </div>
</template>
