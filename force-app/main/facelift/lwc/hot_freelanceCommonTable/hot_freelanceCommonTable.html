<template>
    <table class="table-wrapper" role="region" aria-label={ariaLabel} tabindex="0">
        <thead>
            <tr>
                <!-- Desktop: select all checkbox-->
                <th lwc:if={checkbox} class="checkbox-column">
                    <c-checkbox title="Merk alle" oncheckboxclick={handleAllCheckboxesClick}></c-checkbox>
                </th>

                <!-- Column headers -->
                <template for:each={columns} for:item="col">
                    <th key={col.fieldName} scope="col" tabindex="0" class="column-th-desktop">{col.label}</th>
                </template>
            </tr>
        </thead>

        <tbody>
            <!-- Row rendering -->
            <template for:each={recordsToShow} for:item="record">
                <tr
                    class="row"
                    key={record.id}
                    data-id={record.id}
                    onclick={handleOnRowClick}
                    onkeypress={handleOnRowClick}
                >
                    <!-- Row checkbox no value added -->
                    <!-- TODO: Needs to fix the checkbox position when user resize the browser to small-->
                    <!-- Checkbox position is fine when dimensions are iphone on developer console -->
                    <td lwc:if={checkbox} class="checkbox-column checkbox-mobile-right">
                        <c-checkbox
                            class="row-checkbox"
                            default-value={record.checked}
                            oncheckboxclick={handleSingleCheckboxClick}
                        ></c-checkbox>
                    </td>

                    <!-- Show Conversation, priority and status badges -->
                    <!-- TODO: Position the conversation and status badges beside each other -->
                    <template for:each={record.fields} for:item="field">
                        <td key={field.name} tabindex="0" class={field.cssClass}>
                            <template lwc:if={field.badgeClass}>
                                <span class={field.badgeClass} aria-label={field.iconAriaLabel}
                                    >{field.iconAriaLabel}</span
                                >
                            </template>
                            <template lwc:elseif={field.statusBadgeClass}>
                                <span class={field.statusBadgeClass}> {field.statusBadgeLabel} </span>
                            </template>
                            <template lwc:else> {field.value} </template>
                        </td>
                    </template>
                </tr>
            </template>
        </tbody>
    </table>
</template>
