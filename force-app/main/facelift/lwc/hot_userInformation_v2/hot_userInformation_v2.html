<template>
    <div class="center-content" aria-labelledby="user-info-header">
        <div class="user-info-tile" tabindex="-1">
            <div class="back-link-div">
                <c-hot_back-button aria-label="Tilbake"></c-hot_back-button>
            </div>

            <h1 id="user-info-header">Min side</h1>

            <section>
                <!-- Kontaktinformasjon -->
                <section class="sub-form" aria-labelledby="contact-info-header">
                    <h2 id="contact-info-header">Kontaktinformasjon</h2>
                    <div class="my-grid">
                        <div class="my-col-half">
                            <label class="output-label" for="mobilePhone">Mobilnummer</label>
                            <p id="mobilePhone" class="output-value" tabindex="0">{mobilePhone}</p>
                        </div>
                        <div class="my-col-half">
                            <label class="output-label" for="email">E-postadresse</label>
                            <p id="email" class="output-value" tabindex="0">{email}</p>
                        </div>
                    </div>
                    <p>
                        <a
                            href="https://minprofil.kontaktregisteret.no/"
                            class="lenke"
                            target="_blank"
                            onclick={setKrrIntegrationStatusToQueued}
                            aria-label="Endre kontaktinformasjon i KRR"
                        >
                            Endre i Kontakt- og reservasjonsregisteret
                        </a>
                    </p>
                    <p lwc:if={isKrrQueued} aria-live="polite">Kontaktinformasjonen vil bli oppdatert innen 24 timer</p>
                </section>

                <!-- Vedtak -->
                <section class="sub-form" aria-labelledby="vedtak-header">
                    <h2 id="vedtak-header">Vedtak</h2>
                    <div class="my-grid">
                        <div class="my-col-half">
                            <c-checkbox
                                label="Arbeidsliv"
                                default-value={workplaceInterpreter}
                                class="checkbox-inline"
                                disabled
                            ></c-checkbox>
                            <c-checkbox
                                label="Dagligliv"
                                default-value={dailyLifeInterpreter}
                                class="checkbox-inline"
                                disabled
                            ></c-checkbox>
                            <c-checkbox
                                label="Utdanning"
                                default-value={educationInterpreter}
                                class="checkbox-inline"
                                disabled
                            ></c-checkbox>
                        </div>
                        <div class="my-col-half">
                            <c-checkbox
                                label="Tolk på arbeidsplass - TPA"
                                default-value={interpreterAW}
                                class="checkbox-inline"
                                disabled
                            ></c-checkbox>
                            <c-checkbox
                                label="Bildetolk"
                                default-value={remoteInterpreter}
                                class="checkbox-inline"
                                disabled
                            ></c-checkbox>
                        </div>
                    </div>
                </section>

                <!-- Tolkemetoder -->
                <section class="sub-form" aria-labelledby="tolkemetoder-header">
                    <h2 id="tolkemetoder-header">Tolkemetoder</h2>
                    <div class="my-grid">
                        <div class="my-col-half">
                            <c-checkbox
                                label="Tegnspråk"
                                default-value={signLanguage}
                                class="checkbox-inline"
                                disabled
                            ></c-checkbox>
                            <c-checkbox
                                label="Skrivetolking"
                                default-value={writtenInterpreter}
                                class="checkbox-inline"
                                disabled
                            ></c-checkbox>
                            <c-checkbox
                                label="Tegn til støtte som munnavlesning"
                                default-value={supportMouthReading}
                                class="checkbox-inline"
                                disabled
                            ></c-checkbox>
                            <c-checkbox
                                label="Taletolking"
                                default-value={speechInterpreting}
                                class="checkbox-inline"
                                disabled
                            ></c-checkbox>
                        </div>
                        <div class="my-col-half">
                            <c-checkbox
                                label="Taktilt tegnspråk"
                                default-value={tactileSignLanguage}
                                class="checkbox-inline"
                                disabled
                            ></c-checkbox>
                            <c-checkbox
                                label="Tegnspråk i begrenset synsfelt"
                                default-value={signLimitedView}
                                class="checkbox-inline"
                                disabled
                            ></c-checkbox>
                            <c-checkbox
                                label="Haptisk kommunikasjon"
                                default-value={hapticCommunication}
                                class="checkbox-inline"
                                disabled
                            ></c-checkbox>
                            <c-checkbox
                                label="Ledsaging"
                                default-value={escort}
                                class="checkbox-inline"
                                disabled
                            ></c-checkbox>
                        </div>
                    </div>
                </section>

                <!-- Annet -->
                <section class="sub-form" aria-labelledby="annet-header">
                    <h2 id="annet-header">Annet</h2>
                    <div class="my-grid">
                        <div class="my-col-half">
                            <label class="output-label" for="degreeOfImpairment">Vedtak</label>
                            <p id="degreeOfImpairment" class="output-value" tabindex="0">{degreeOfImpairment}</p>
                        </div>
                        <div class="my-col-half">
                            <label class="output-label" for="sipAddress">SIP-Adresse Bildetolk</label>
                            <p id="sipAddress" class="output-value" tabindex="0">{sipAddress}</p>
                        </div>
                    </div>
                </section>

                <!-- Sikkerhetstiltak -->
                <section class="sub-form" aria-labelledby="security-measures-header">
                    <h2 id="security-measures-header">Sikkerhetstiltak</h2>
                    <div lwc:if={hasSecurityMeasures}>
                        <template for:each={securityMeasures} for:item="sm">
                            <p key={sm} tabindex="0">{sm}</p>
                        </template>
                    </div>
                </section>

                <!-- Varslingsinnstillinger - visning -->
                <section
                    class="sub-form"
                    aria-labelledby="notification-settings-header"
                    lwc:if={viewUserNotificationSettings}
                >
                    <h2 id="notification-settings-header" style="text-align: center">Varslingsinnstillinger</h2>
                    <div class="my-grid">
                        <div class="my-col-half">
                            <label for="notificationChannel" class="output-label">Varslingskanal</label>
                            <select
                                id="notificationChannel"
                                class="custom-select"
                                disabled
                                aria-disabled="true"
                                onchange={selectionChangeHandler}
                            >
                                <option selected value={selectedOption}>{selectedOption}</option>
                                <template for:each={options} for:item="option">
                                    <option key={option.value} value={option.value}>{option.value}</option>
                                </template>
                            </select>
                        </div>
                        <div class="my-col-half">
                            <c-checkbox
                                label="Reserver mot alle varsler fra tolketjenesten"
                                default-value={isReservedAgainstNotifications}
                                class="checkbox-inline"
                                disabled
                            ></c-checkbox>
                        </div>
                    </div>
                    <template if:false={showSuccess}>
                        <div class="button-class">
                            <c-button
                                button-label="Rediger varslingsinnstillinger"
                                button-styling="primary"
                                desktop-style="width: 20rem; justify-content: center"
                                mobile-style="width: 16rem; justify-content: center"
                                onclick={editUserNotificationBtn}
                            ></c-button>
                        </div>
                    </template>
                </section>

                <!-- Varslingsinnstillinger - redigering -->
                <template lwc:if={editUserNotification}>
                    <section class="sub-form" aria-live="polite" aria-labelledby="notification-settings-edit-header">
                        <h2 id="notification-settings-edit-header" style="text-align: center">
                            Rediger varslingsinnstillinger
                        </h2>
                        <div class="my-grid">
                            <div class="my-col-half">
                                <c-picklist
                                    master-label="Velg hvor du vil få varsler"
                                    choices={picklistOptions}
                                    onpicklistvaluechange={selectionChangeHandler}
                                ></c-picklist>
                            </div>
                            <div class="my-col-half">
                                <c-checkbox
                                    label="Reserver mot alle varsler fra tolketjenesten"
                                    default-value={isReservedAgainstNotifications}
                                    oncheckboxclick={handleOptionalCheckbox}
                                ></c-checkbox>
                            </div>
                        </div>

                        <div class="button-class">
                            <c-button
                                button-label="Lagre"
                                button-styling="primary"
                                desktop-style="width: 8rem; justify-content: center"
                                mobile-style="width: 8rem; justify-content: center"
                                onbuttonclick={handleSubmit}
                            ></c-button>
                            <c-button
                                button-label="Avbryt"
                                button-styling="secondary"
                                desktop-style="width: 8rem; justify-content: center"
                                mobile-style="width: 8rem; justify-content: center"
                                onbuttonclick={handleAbort}
                            ></c-button>
                        </div>
                    </section>
                </template>
            </section>

            <!-- Success message -->
            <template lwc:if={showSuccess}>
                <div class="success-message" role="status" aria-live="polite">
                    <span class="success-icon" aria-hidden="true">✔</span>
                    <span>Endringene ble lagret</span>
                    <button class="close-success-button" onclick={handleCloseSuccess} aria-label="Lukk melding">
                        &times;
                    </button>
                </div>
            </template>
        </div>
    </div>
</template>
